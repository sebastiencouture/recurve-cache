/*! recurve-cache.js - v0.1.0 - by Sebastien Couture 2015-03-21 */!function(a,b){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Cache=b():a.Cache=b()}(this,function(){"use strict";function a(a,b){(h(a)||null===a)&&(a=0),(h(b)||null===b)&&(b=0),this._data={},this._countLimit=a,this._totalCostLimit=b}function b(a){var b=0;return g(a._data,function(a){b+=a.cost}),b}function c(a){var b=0;return g(a._data,function(){b++}),b}function d(a){e(a)&&(f(a),d(a))}function e(a){return 0<a.getCountLimit()&&a.getCountLimit()<c(a)||0<a.getTotalCostLimit()&&a.getTotalCostLimit()<b(a)}function f(a){var b=0,c=null;if(g(a._data,function(a,d){c?b<a.cost&&(c=d,b=a.cost):(c=d,b=a.cost)}),!c)throw new Error("key must exist");a.remove(c)}function g(a,b,c){if(!a)return a;if(a.forEach&&a.forEach===Object.forEach)a.forEach(b,c);else for(var d in a)if(a.hasOwnProperty(d)&&!1===b.call(c,a[d],d,a))break;return a}function h(a){return void 0===a}return a.prototype={get:function(a){var b=this._data[a];return b?b.value:null},set:function(a,b,c){a&&(h(c)&&(c=0),this._data[a]&&delete this._data[a],this._data[a]={value:b,cost:c},(this._countLimit||this._totalCostLimit&&c)&&d(this))},remove:function(a){if(!a)return!1;var b=this._data.hasOwnProperty(a);return delete this._data[a],b},exists:function(a){return!!this._data[a]},clear:function(){this._data={}},setCountLimit:function(a){this._countLimit=a,d(this)},getCountLimit:function(){return this._countLimit},setTotalCostLimit:function(a){this._totalCostLimit=a,d(this)},getTotalCostLimit:function(){return this._totalCostLimit},forEach:function(a,b){g(this._data,function(c,d){a.call(b,c.value,d)},b)}},a});